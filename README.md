# üö¶ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Go: Atomic Variables

**–¢–µ–º–∞:** –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Go

---

> **‚ÄúAtomic operations are not magic ‚Äî they are well-designed CPU instructions for one-variable safety.‚Äù**  
> <sub>‚Äî Go FAQ: Atomic ops vs Mutex [7]</sub>

---

## üìë –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [1. –í–≤–µ–¥–µ–Ω–∏–µ](#1-–≤–≤–µ–¥–µ–Ω–∏–µ)
- [2. –¢–µ–æ—Ä–∏—è: –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Go](#2-—Ç–µ–æ—Ä–∏—è-–∞—Ç–æ–º–∞—Ä–Ω—ã–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–≤-go)
  - [2.1. –ß—Ç–æ —Ç–∞–∫–æ–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å?](#21-—á—Ç–æ-—Ç–∞–∫–æ–µ-–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å)
  - [2.2. –ü–æ—á–µ–º—É –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–∞–∂–Ω—ã –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏](#22-–ø–æ—á–µ–º—É-–∞—Ç–æ–º–∞—Ä–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏-–≤–∞–∂–Ω—ã-–≤-–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏)
  - [2.3. –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Go](#23-–∫–∞–∫-—É—Å—Ç—Ä–æ–µ–Ω—ã-–∞—Ç–æ–º–∞—Ä–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏-–≤-go)
  - [2.4. –ü–∞–∫–µ—Ç sync/atomic: –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏](#24-–ø–∞–∫–µ—Ç-syncatomic-–ø—Ä–∏–Ω—Ü–∏–ø—ã-–∏-—Ñ—É–Ω–∫—Ü–∏–∏)
  - [2.5. –û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∏—Ö –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ](#25-–æ—Å–Ω–æ–≤–Ω—ã–µ-–∞—Ç–æ–º–∞—Ä–Ω—ã–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏-–∏-–∏—Ö-–ø–æ–¥—Ä–æ–±–Ω–æ–µ-–æ–ø–∏—Å–∞–Ω–∏–µ)
    - [2.5.1. Load –∏ Store](#251-load-–∏-store)
    - [2.5.2. Add](#252-add)
    - [2.5.3. Swap](#253-swap)
    - [2.5.4. CompareAndSwap (CAS)](#254-compareandswap-cas)
    - [2.5.5. atomic.Value](#255-atomicvalue)
  - [2.6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π](#26-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-–∏-–ø–æ–¥–≤–æ–¥–Ω—ã–µ-–∫–∞–º–Ω–∏-–∞—Ç–æ–º–∞—Ä–Ω—ã—Ö-–æ–ø–µ—Ä–∞—Ü–∏–π)
  - [2.7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å mutex –∏ –∫–∞–Ω–∞–ª–∞–º–∏](#27-—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ-—Å-mutex-–∏-–∫–∞–Ω–∞–ª–∞–º–∏)
- [3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#3-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)
- [4. –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#4-–æ–ø–∏—Å–∞–Ω–∏–µ-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- [5. –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞—á–∏ (Concurrency)](#5-–¥–æ–º–∞—à–Ω–∏–µ-–∑–∞–¥–∞—á–∏-concurrency)
- [6. –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å](#6-–∫–∞–∫-–∑–∞–ø—É—Å–∫–∞—Ç—å)
- [7. Best Practices –∏ —Å–æ–≤–µ—Ç—ã](#7-best-practices-–∏-—Å–æ–≤–µ—Ç—ã)
- [8. –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤](#8-—Å–ø–∏—Å–æ–∫-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)

---

## 1. –í–≤–µ–¥–µ–Ω–∏–µ

–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º—ã–µ —á–∞—Å—Ç–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –û–¥–Ω–∞–∫–æ —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–¥–µ–ª—è–µ–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ –≤—Å–µ–≥–¥–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö (data race).  
–ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, Go –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –±–æ–≥–∞—Ç—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: –æ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –¥–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ –ø–∞–∫–µ—Ç–µ [`sync/atomic`](https://pkg.go.dev/sync/atomic) [9]. –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫–∏, —Ñ–ª–∞–≥–∏, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Å—Ç—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ [3][4].

---

## 2. –¢–µ–æ—Ä–∏—è: –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Go

### 2.1. –ß—Ç–æ —Ç–∞–∫–æ–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å?

**–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** ‚Äî —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±—ã—Ç—å –Ω–µ–¥–µ–ª–∏–º–æ–π: –ª–∏–±–æ –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –ª–∏–±–æ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –≤–æ–≤—Å–µ.  
–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∏ –æ–¥–Ω–∞ –¥—Ä—É–≥–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞ –∏–ª–∏ –ø–æ—Ç–æ–∫ –Ω–µ —É–≤–∏–¥–∏—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Äî —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä–æ–µ –∏–ª–∏ –Ω–æ–≤–æ–µ [7][8].  
–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ: –µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, x++) –Ω–µ –∞—Ç–æ–º–∞—Ä–Ω–∞, –¥–≤–µ –≥–æ—Ä—É—Ç–∏–Ω—ã –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äú–ø—Ä–æ—á–∏—Ç–∞—Ç—å‚Äù x, —É–≤–µ–ª–∏—á–∏—Ç—å –∏ –∑–∞–ø–∏—Å–∞—Ç—å ‚Äî –∏ —Ç–æ–≥–¥–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö.

**–ì–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö (data race)** ‚Äî —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –¥–≤–µ –∏–ª–∏ –±–æ–ª–µ–µ –≥–æ—Ä—É—Ç–∏–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö –ø–∏—à–µ—Ç, –∏ –Ω–µ—Ç –¥–æ–ª–∂–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ [1][2][5].

---

### 2.2. –ü–æ—á–µ–º—É –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–∞–∂–Ω—ã –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏

–í –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–µ—Å—è—Ç–∫–∏ –∏ —Å–æ—Ç–Ω–∏ –≥–æ—Ä—É—Ç–∏–Ω –º–æ–≥—É—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —á–∏—Ç–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á–µ—Ç—á–∏–∫–∏, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏, —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏).  
–ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∫–∞–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ç–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º ‚Äî —á–∞—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω–∞, –≤–æ–∑–º–æ–∂–Ω—ã –¥–∞–∂–µ –∫—Ä–∞—à–∏ –∏–ª–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã [1][2][5].

–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è **–º—å—é—Ç–µ–∫—Å—ã** ‚Äî –æ–Ω–∏ ‚Äú–∑–∞–ø–∏—Ä–∞—é—Ç‚Äù –æ–±–ª–∞—Å—Ç—å –∫–æ–¥–∞ –¥–ª—è —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞. –ù–æ –º—å—é—Ç–µ–∫—Å—ã ‚Äî ‚Äú—Ç—è–∂–µ–ª—ã–π‚Äù –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ —Ä–µ–∂–∏–º —è–¥—Ä–∞ –û–°, –º–æ–≥—É—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º, –∑–∞–¥–µ—Ä–∂–∫–∞–º –∏ deadlock [4][6][7].

–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–æ—Ç–∏–≤, —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (—á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏) –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ [3][4][9][10]. –ò—Ö –≥–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å ‚Äî –æ–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—å—é—Ç–µ–∫—Å—ã [6][7].

---

### 2.3. –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω—ã –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Go

–ü–∞–∫–µ—Ç [`sync/atomic`](https://pkg.go.dev/sync/atomic) —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏: —á—Ç–µ–Ω–∏–µ (Load), –∑–∞–ø–∏—Å—å (Store), –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç/–¥–µ–∫—Ä–µ–º–µ–Ω—Ç (Add), –æ–±–º–µ–Ω (Swap), —É—Å–ª–æ–≤–Ω—ã–π –æ–±–º–µ–Ω (CompareAndSwap, CAS), –∞ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç—É —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ (`atomic.Value`) [9].

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ LOCK CMPXCHG –Ω–∞ x86, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –Ω–µ–¥–µ–ª–∏–º–æ–π –¥–ª—è –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏ —è–¥–µ—Ä [3][4][9][10].  
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫–∏, —Ñ–ª–∞–≥–∏, —É–∫–∞–∑–∞—Ç–µ–ª–∏, ‚Äú–≥–æ—Ä—è—á–∏–µ‚Äù —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go.

---

### 2.4. –ü–∞–∫–µ—Ç sync/atomic: –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

–ü–∞–∫–µ—Ç [`sync/atomic`](https://pkg.go.dev/sync/atomic) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã –¥–ª—è –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –ø—Ä–æ—Å—Ç—ã–º–∏ —Ç–∏–ø–∞–º–∏:

- **LoadT(addr *T) T** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (T = int32, int64, uint32, uint64, Pointer –∏ –¥—Ä.)
- **StoreT(addr *T, val T)** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
- **AddT(addr *T, delta T) T** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç delta –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–∏–ª–∏ –≤—ã—á–∏—Ç–∞–µ—Ç, –µ—Å–ª–∏ delta < 0)
- **SwapT(addr *T, new T) (old T)** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ –∑–∞–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –Ω–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞—è —Å—Ç–∞—Ä–æ–µ
- **CompareAndSwapT(addr *T, old, new T) bool** ‚Äî –µ—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ addr —Ä–∞–≤–Ω–æ old, –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ new –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true

**atomic.Value** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø–æ–¥–º–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π –ª—é–±–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ (—á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) [9][20].

---

### 2.5. –û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∏—Ö –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

#### 2.5.1. Load –∏ Store

**Load** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ —á–∏—Ç–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —á—Ç–µ–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç ‚Äú—Ä–∞–∑–º–∞–∑–∞–Ω–æ‚Äù –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏.

**Store** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–∞–ø–∏—Å—å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–∏–¥–Ω–∞ –¥—Ä—É–≥–∏–º –≥–æ—Ä—É—Ç–∏–Ω–∞–º, –∏ –Ω–∏–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–µ –≤–º–µ—à–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å [8][15][16][17][18].

**–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
```go
var flag uint32
atomic.StoreUint32(&flag, 1) // –ü–∏—Å–∞—Ç–µ–ª—å
if atomic.LoadUint32(&flag) == 1 { // –ß–∏—Ç–∞—Ç–µ–ª—å
    // ... –¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–≥–∞ ...
}
```
**Memory barrier:**  
- Store ‚Äî ‚Äúrelease‚Äù: –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –¥–æ –∑–∞–ø–∏—Å–∏.
- Load ‚Äî ‚Äúacquire‚Äù: –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ –Ω–∞—á–Ω—É—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —á—Ç–µ–Ω–∏–µ [8].

---

#### 2.5.2. Add

**Add** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç (–∏–ª–∏ —É–º–µ–Ω—å—à–∞–µ—Ç) –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.

**–ü—Ä–∏–º–µ—Ä:**
```go
var counter int64
for i := 0; i < 1000; i++ {
    atomic.AddInt64(&counter, 1)
}
```
**–û—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è:**
- —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ [11]
- –≥–æ—Ä—è—á–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

---

#### 2.5.3. Swap

**Swap** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ –∑–∞–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞ –Ω–æ–≤–æ–µ, –≤–æ–∑–≤—Ä–∞—â–∞—è —Å—Ç–∞—Ä–æ–µ.  
–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —É–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ–µ –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π.

**–ü—Ä–∏–º–µ—Ä:**
```go
var state int32 = 0
prev := atomic.SwapInt32(&state, 1)
fmt.Println("–†–µ–∂–∏–º –¥–æ –∑–∞–º–µ–Ω—ã:", prev)
```

---

#### 2.5.4. CompareAndSwap (CAS)

**CompareAndSwap (CAS)** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å –æ–∂–∏–¥–∞–µ–º—ã–º –∏, –µ—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ –Ω–∞ –Ω–æ–≤–æ–µ. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, –µ—Å–ª–∏ –∑–∞–º–µ–Ω–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ [6][13].

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è:**
- —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ lock-free —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö (—Å—Ç–µ–∫–æ–≤, –æ—á–µ—Ä–µ–¥–µ–π)
- –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä (lock-free —Å—Ç–µ–∫):**
```go
type Node struct {
    value interface{}
    next  *Node
}
var head unsafe.Pointer // *Node

func push(v interface{}) {
    newNode := &Node{value: v}
    for {
        oldHead := (*Node)(atomic.LoadPointer(&head))
        newNode.next = oldHead
        if atomic.CompareAndSwapPointer(&head, unsafe.Pointer(oldHead), unsafe.Pointer(newNode)) {
            break
        }
    }
}
```

---

#### 2.5.5. atomic.Value

**atomic.Value** ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞–º–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏–π –ª—é–±–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ (—á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å).  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã Store, Load, Swap, CompareAndSwap [9][20].

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –î–ª—è –æ–¥–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Value –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ (–∏–Ω–∞—á–µ panic).
- –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ Store –Ω–µ–ª—å–∑—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å Value (–∏–Ω–∞—á–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ) [20].

**–ü—Ä–∏–º–µ—Ä (–≥–æ—Ä—è—á–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏):**
```go
var config atomic.Value
config.Store(initialConfig)

go func() {
    for {
        newCfg := loadNewConfig()
        config.Store(newCfg)
        time.Sleep(time.Minute)
    }
}()

func worker() {
    for {
        cfg := config.Load().(Config)
        handle(cfg)
    }
}
```

---

### 2.6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

- **–¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:**  
  –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞—â–∏—â–∞—é—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é ‚Äî –Ω–µ–ª—å–∑—è –∞—Ç–æ–º–∞—Ä–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ä–∞–∑—É –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ [6].
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–∏–ø–æ–≤:**  
  –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã (int32, int64, uint32, uint64, Pointer –∏ –¥—Ä.).
- **–£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∫–æ–¥–∞:**  
  –ö–æ–¥ —Å –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ —Å–ª–æ–∂–Ω–µ–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏, —á–µ–º —Å –º—å—é—Ç–µ–∫—Å–∞–º–∏ ‚Äî –ª–µ–≥–∫–æ –æ—à–∏–±–∏—Ç—å—Å—è —Å –ø–æ—Ä—è–¥–∫–æ–º –∏–ª–∏ –∑–∞–±—ã—Ç—å –ø—Ä–æ ‚Äú–∫–∞—Å–∫–∞–¥–Ω—É—é‚Äù –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å [6][20].
- **–ù–µ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä:**  
  –î–ª—è –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ–ª—è–º–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—å—é—Ç–µ–∫—Å –∏–ª–∏ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∫–∞–Ω–∞–ª—ã [7][9].

---

### 2.7. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å mutex –∏ –∫–∞–Ω–∞–ª–∞–º–∏

| –ú–µ—Ö–∞–Ω–∏–∑–º           | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞                            | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏                                   |
|--------------------|-----------------------------------------|----------------------------------------------|
| **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ, –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ | –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, —Å–ª–æ–∂–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä [6][7][9] |
| **–ú—å—é—Ç–µ–∫—Å (Mutex)**    | –õ–µ–≥–∫–æ –∑–∞—â–∏—â–∞–µ—Ç –ª—é–±—É—é —Å–µ–∫—Ü–∏—é           | –í–æ–∑–º–æ–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, deadlock                |
| **–ö–∞–Ω–∞–ª—ã (chan)**      | –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è         | –ë–æ–ª–µ–µ —Ç—è–∂–µ–ª—ã–µ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å atomic          |

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [6][7][9]

---

## 3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### 3.1. –ü—Ä–∏–º–µ—Ä –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å atomic

**–ü—Ä–æ–±–ª–µ–º–∞ –≥–æ–Ω–∫–∏:**
```go
var ops uint64
var wg sync.WaitGroup
wg.Add(2)
go func() { for i := 0; i < 1000; i++ { ops++ } wg.Done() }()
go func() { for i := 0; i < 1000; i++ { ops++ } wg.Done() }()
wg.Wait()
fmt.Println("ops:", ops) // < 2000, –≥–æ–Ω–∫–∞!
```
**–†–µ—à–µ–Ω–∏–µ —Å atomic:**
```go
var ops uint64
var wg sync.WaitGroup
wg.Add(2)
go func() { for i := 0; i < 1000; i++ { atomic.AddUint64(&ops, 1) } wg.Done() }()
go func() { for i := 0; i < 1000; i++ { atomic.AddUint64(&ops, 1) } wg.Done() }()
wg.Wait()
fmt.Println("ops:", ops) // –≤—Å–µ–≥–¥–∞ 2000
```
_–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [21]_

---

### 3.2. –ê—Ç–æ–º–∞—Ä–Ω—ã–π —Ñ–ª–∞–≥ (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)

```go
var done atomic.Uint32 // —Å Go 1.19+
go func() {
    // ... —Ä–∞–±–æ—Ç–∞ ...
    done.Store(1)
}()
for done.Load() == 0 {
    // –∂–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
}
fmt.Println("–ì–æ—Ç–æ–≤–æ")
```
_–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [9]_

---

### 3.3. atomic.Value –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```go
var config atomic.Value
config.Store(initialConfig)
go serveRequests(&config)

func reloadConfig(newCfg Config) {
    config.Store(newCfg)
}

func serveRequests(cfg *atomic.Value) {
    for {
        current := cfg.Load().(Config)
        // —Ä–∞–±–æ—Ç–∞—Ç—å —Å current
    }
}
```
_–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [9][20]_

---

## 4. –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
my_lab/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ demonstration/
‚îÇ       ‚îî‚îÄ‚îÄ main.go           # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å—á–µ—Ç—á–∏–∫–æ–≤
‚îú‚îÄ‚îÄ pkg/
‚îÇ   ‚îú‚îÄ‚îÄ concurrency/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ counter.go        # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Counter, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ counter_test.go
‚îÇ   ‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ counter/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.go       # –ü—Ä–∏–º–µ—Ä: —Å—á–µ—Ç—á–∏–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ queue/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ main.go       # –ü—Ä–∏–º–µ—Ä: –æ—á–µ—Ä–µ–¥—å
‚îÇ   ‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ atomic/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ barrier/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deadlock/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ locker/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mutex/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ queue/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ problem.go
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ solution.go
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ solution_test.go
‚îÇ   ‚îî‚îÄ‚îÄ tasks/
‚îÇ       ‚îú‚îÄ‚îÄ tasks.md
‚îÇ       ‚îú‚îÄ‚îÄ task1/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task1.go
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ task1_solution.go
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ task1_test.go
‚îÇ       ‚îî‚îÄ‚îÄ task2/
‚îÇ           ‚îú‚îÄ‚îÄ task2.go
‚îÇ           ‚îú‚îÄ‚îÄ task2_solution.go
‚îÇ           ‚îî‚îÄ‚îÄ task2_test.go
‚îú‚îÄ‚îÄ go.mod
‚îî‚îÄ‚îÄ README.md
```

---

## 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ (Concurrency)

- **–ó–∞–¥–∞—á–∞ 1:** –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π UniqueUsers  
  - –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞: `pkg/tasks/task1/task1.go`
  - –†–µ—à–µ–Ω–∏–µ: `pkg/tasks/task1/task1_solution.go`
  - –¢–µ—Å—Ç—ã: `pkg/tasks/task1/task1_test.go`
- **–ó–∞–¥–∞—á–∞ 2:** –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å  
  - –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞: `pkg/tasks/task2/task2.go`
  - –†–µ—à–µ–Ω–∏–µ: `pkg/tasks/task2/task2_solution.go`
  - –¢–µ—Å—Ç—ã: `pkg/tasks/task2/task2_test.go`
- **–°–≤–æ–¥–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á:** `pkg/tasks/tasks.md`

---

## 6. –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å

- **–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é:**
    ```bash
    go run cmd/demonstration/main.go
    ```
- **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã:**
    ```bash
    go test ./...
    ```
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å:**
    ```bash
    go test ./pkg/internal/atomic/...
    go test ./pkg/tasks/task1/...
    ```

---

## 7. Best Practices –∏ —Å–æ–≤–µ—Ç—ã

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `go test -race` –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–æ–Ω–æ–∫ [7][13].
- –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª, —Ñ–ª–∞–≥–æ–≤ –∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ atomic, –∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä ‚Äî mutex [6][7].
- –ù–µ –∫–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Ç–æ–º–∏–∫–æ–≤ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞: —ç—Ç–æ –Ω–µ –¥–∞—Å—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –≤—Å–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π [6].
- –î–ª—è "–≥–æ—Ä—è—á–∏—Ö" —Å—á–µ—Ç—á–∏–∫–æ–≤ atomic –±—ã—Å—Ç—Ä–µ–µ mutex [10][11].
- –í—Å–µ–≥–¥–∞ –ø–æ–∫—Ä—ã–≤–∞–π—Ç–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–π –∫–æ–¥ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞–º–∏ —Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–æ–º –∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ [1][2][13].
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞—Ç–æ–º–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ!

---

## 8. –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

1. T. Tu, X. Liu, L. Song –∏ Y. Zhang, ¬´Understanding Real-World Concurrency Bugs in Go,¬ª *ASPLOS 2019*, —Å—Ç—Ä. 1‚Äì14, [DOI:10.1145/3297858.3304069](https://doi.org/10.1145/3297858.3304069)
2. T. Tu, X. Liu, L. Song –∏ Y. Zhang, ¬´Understanding Real-World Concurrency Bugs in Go,¬ª *ISSRE 2023*, —Å—Ç—Ä. 582‚Äì592, [DOI:10.1109/ISSRE62328.2024.00061](https://doi.org/10.1109/ISSRE62328.2024.00061)
3. ¬´–ê—Ç–æ–º–∏–∫–∏ –≤ Go: –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏¬ª. –•–∞–±—Ä, 2023. [https://habr.com/ru/articles/744822/](https://habr.com/ru/articles/744822/)
4. ¬´Go: –∂–∞—Ä–∏–º –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ. –ê—Ç–æ–º–Ω–æ, –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑ –º—å—é—Ç–µ–∫—Å–æ–≤¬ª. –•–∞–±—Ä, 2024. [https://habr.com/ru/company/ruvds/blog/840748/](https://habr.com/ru/company/ruvds/blog/840748/)
5. ¬´–ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –≤ Go¬ª. –•–∞–±—Ä, 2024. [https://habr.com/ru/articles/840750/](https://habr.com/ru/articles/840750/)
6. ¬´–ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∞—Ç–æ–º–∏–∫–æ–≤ –≤ Go¬ª. AntonZ.ru, 2024. [https://antonz.ru/atomics-composition/](https://antonz.ru/atomics-composition/)
7. ¬´Go FAQ: –ö–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ? –ö–∞–∫ –Ω–∞—Å—á–µ—Ç –º—å—é—Ç–µ–∫—Å–æ–≤?¬ª Golang –±–ª–æ–≥, 2019. [https://golang-blog.blogspot.com/2019/02/go-faq-atomic-ops-mutex.html](https://golang-blog.blogspot.com/2019/02/go-faq-atomic-ops-mutex.html)
8. Go Team. ¬´The Go Memory Model¬ª. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Go, 2022. [https://go.dev/ref/mem](https://go.dev/ref/mem)
9. Go Team. ¬´sync/atomic: –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ Go¬ª. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Go, 2025. [https://pkg.go.dev/sync/atomic](https://pkg.go.dev/sync/atomic)
10. Caraveo, R. ¬´The Go 1.19 Atomic Wrappers and why to use them¬ª. Medium, 2023. [https://medium.com/@deckarep/the-go-1-19-atomic-wrappers-and-why-to-use-them-ae14c1177ad8](https://medium.com/@deckarep/the-go-1-19-atomic-wrappers-and-why-to-use-them-ae14c1177ad8)
11. Vincent. ¬´Go: How to Reduce Lock Contention with the Atomic Package¬ª. A Journey With Go (Medium), 2020. [https://medium.com/a-journey-with-go/go-how-to-reduce-lock-contention-with-the-atomic-package-ba3b2664b549](https://medium.com/a-journey-with-go/go-how-to-reduce-lock-contention-with-the-atomic-package-ba3b2664b549)
12. The Quantum Yogi. ¬´The Curious Case of Go‚Äôs Memory Model: Simple Language, Subtle Semantics¬ª. Medium, 2025. [https://medium.com/@kanishksinghpujari/the-curious-case-of-gos-memory-model-simple-language-subtle-semantics-4d3f2029988c](https://medium.com/@kanishksinghpujari/the-curious-case-of-gos-memory-model-simple-language-subtle-semantics-4d3f2029988c)
13. Parker, N. ¬´Understanding and Using the sync/atomic Package in Go¬ª. Coding Explorations, 2024. [https://www.codingexplorations.com/blog/understanding-and-using-the-syncatomic-package-in-go](https://www.codingexplorations.com/blog/understanding-and-using-the-syncatomic-package-in-go)
14. Parker, N. ¬´Understanding Golang's Atomic Package and Mutexes¬ª. Coding Explorations, 2023. [https://www.codingexplorations.com/blog/understanding-golangs-atomic-package-and-mutexes](https://www.codingexplorations.com/blog/understanding-golangs-atomic-package-and-mutexes)
15. Dulitha. ¬´Mastering Synchronization Primitives in Go¬ª. HackerNoon, 2023. [https://hackernoon.com/mastering-synchronization-primitives-in-go](https://hackernoon.com/mastering-synchronization-primitives-in-go)
16. Pang. ¬´Is assigning a pointer atomic in Go?¬ª Stack Overflow, 2014. [https://stackoverflow.com/questions/21447463/is-assigning-a-pointer-atomic-in-go](https://stackoverflow.com/questions/21447463/is-assigning-a-pointer-atomic-in-go)
17. Drathier. ¬´Is variable assignment atomic in go?¬ª Stack Overflow, 2016. [https://stackoverflow.com/questions/33715241/variable-assignment-atomic-in-go](https://stackoverflow.com/questions/33715241/variable-assignment-atomic-in-go)
18. api. ¬´Does golang atomic.Load have a acquire semantics?¬ª Stack Overflow, 2019. [https://stackoverflow.com/questions/55909553/does-golang-atomic-load-have-an-acquire-semantics](https://stackoverflow.com/questions/55909553/does-golang-atomic-load-have-an-acquire-semantics)
19. Hugh. ¬´Is there a difference in Go between a counter using atomic operations and
